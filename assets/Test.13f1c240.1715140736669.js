import{d as U,G as v,H as W,I as X,z as V,o as J,J as Y,b as T,c as K,e as a,K as b,M as Z,f as C,w as H,g as z,N as tt,O as et,B as Q,p as ot,j as st,l as R,x as nt,P as lt,h as q,Q as D,u as O}from"./index-598fa0ab.js";const it=g=>(ot("data-v-7d02193c"),g=g(),st(),g),at={class:"guider-content"},rt=it(()=>a("h1",null,"第一步",-1)),ut={class:"guider-footer flex justify-between w-full"},ct=U({__name:"Guider",props:{current:[HTMLElement,Object,String],options:{required:!0,type:Array},show:Boolean},emits:["close","update:show","update:current"],setup(g,{emit:B}){const l=g,h=v(0),y=W({get(){return l.current&&(h.value=l.options.findIndex(t=>t.target===l.current)),h.value},set(t){const o=l.options[t];o?(h.value=t,r("update:current",o.target)):(h.value=0,r("close"),r("update:current",l.options[0].target),r("update:show",!1))}}),n=v(),_=v(l.show),e=X({width:0,height:0,left:0,top:0,right:0,bottom:0}),r=B,x=W(()=>{var o;const t=l.current??((o=l.options[h.value])==null?void 0:o.target);if(t)return typeof t=="string"?document.querySelector(t):t instanceof HTMLElement?t:t.$el}),$=W(()=>{const{offsetWidth:t,offsetHeight:o}=n.value||{offsetWidth:0,offsetHeight:0},{left:i,top:d,right:p,bottom:c,height:w,width:f}=e,s={main:"horizontal",sub:"vertical",horizontal:"left",vertical:"top"};return Math.max(i,p)>=Math.max(d,c)?(s.main="horizontal",s.sub="vertical",s.horizontal=i>p?"left":"right",d+w/2<o/2&&c+w/2>o/2?s.vertical="top":d+w/2>o/2&&c+w/2<o/2?s.vertical="bottom":s.vertical="center"):(s.main="vertical",s.sub="horizontal",s.vertical=d>c?"top":"bottom",i+f/2<t/2&&p+f/2>t/2?s.horizontal="left":i+f/2>t/2&&p+f/2<t/2?s.horizontal="right":s.horizontal="center"),s}),S=W(()=>{var j,G,L,A,N,P;const t={left:0,top:0};if(!l.show||!n.value||!_.value)return t;const{top:o,left:i,right:d,bottom:p,height:c,width:w}=e,f=$.value,s=f[f.main],E=f[f.sub],M=10,F=(f.main==="horizontal"?(j=n.value)==null?void 0:j.offsetWidth:(G=n.value)==null?void 0:G.offsetHeight)??0;return t[s]=e[s]-F-M,s==="right"?t.left=i+w+M:s==="bottom"&&(t.top=o+c+M),E==="center"?f.main==="horizontal"?t.top=o+c/2-(((L=n.value)==null?void 0:L.offsetHeight)??0)/2:t.left=i+w/2-(((A=n.value)==null?void 0:A.offsetWidth)??0)/2:t[E]=e[E],t.left===void 0&&(t.left=window.innerWidth-t.right-((N=n.value)==null?void 0:N.offsetWidth)),t.top===void 0&&(t.top=window.innerHeight-t.bottom-((P=n.value)==null?void 0:P.offsetHeight)),t}),u=W(()=>{const t={left:-16,top:-16};if(!l.show||!n.value||!_.value)return t;const o=$.value,i=o[o.main],d=o[o.sub],{offsetHeight:p=0,offsetWidth:c=0}=n.value??{};return i==="left"?t.left=(c??0)-4:i==="top"&&(t.top=(p??0)-4),o.main==="horizontal"&&(d==="center"?t.top=p/2-10:d==="bottom"?t.top=p-e.height/2-10:t.top=e.height/2-10),o.main==="vertical"&&(d==="center"?t.left=c/2-10:d==="right"?t.left=c-e.width/2-10:t.left=e.width/2-10),t});function m(){const t=x.value;if(!t)return;const o=et(t);e.left=o[0],e.top=o[1],e.width=t.offsetWidth,e.height=t.offsetHeight,e.right=window.innerWidth-e.width-e.left,e.bottom=window.innerHeight-e.height-e.top}V(()=>[x.value,l.show],m),V(()=>l.show,t=>{_.value=t},{flush:"post"}),J(()=>{window.addEventListener("resize",m)}),Y(()=>{window.removeEventListener("resize",m)});function I(){y.value+=1}function k(){r("close"),r("update:show",!1)}return(t,o)=>{const i=Q;return T(),K(tt,{to:"body"},[a("div",{class:"guider",style:b(`display: ${g.show?"static":"none"}`)},[a("div",{class:"guider-left",style:b(`border-left: ${e.left-2}px solid rgba(0, 0, 0, 0.25);`)},null,4),a("div",{class:"guider-top",style:b(`left: ${e.left-2}px; width: ${e.width+4}px; border-top: ${e.top-2}px solid rgba(0, 0, 0, 0.25);`)},null,4),a("div",{class:"guider-right",style:b(`left: ${e.left+e.width+2}px; background-color: rgba(0, 0, 0, 0.25)`)},null,4),a("div",{class:"guider-bottom",style:b(`left: ${e.left-2}px; width: ${e.width+4}px; top: ${e.top+e.height+2}px`)},null,4),a("div",{ref_key:"doc",ref:n,class:"guider-doc flex flex-col justify-between rounded-md",style:b(`left: ${S.value.left}px;top:${S.value.top}px`)},[a("div",{class:"arrow",style:b(`left: ${u.value.left}px; top: ${u.value.top}px; border-${$.value[$.value.main]}-color: white`)},null,4),a("div",at,[rt,a("div",null,[Z(t.$slots,"default",{},void 0,!0)])]),a("div",ut,[C(i,{onClick:k},{default:H(()=>[z("关闭")]),_:1}),C(i,{type:"primary",onClick:I},{default:H(()=>[z("下一步")]),_:1})])],4)],4)])}}});const ft=R(ct,[["__scopeId","data-v-7d02193c"]]),dt={class:"test-page"},pt=U({__name:"Test",setup(g){const B=nt();B.setAuthorities(["personal:edit","personal:remove"]);const l=B.useAuth("personal:edit",S=>console.log("hi, "+S)),h=()=>console.log("say hi");l("jack");const y=v(),n=v(),_=v();let e=[];const r=v(),x=v(!1);function $(){console.log("hello")}return J(()=>{r.value=y.value,e.push({target:y.value,doc:_.value},{target:n.value,doc:_.value})}),(S,u)=>{const m=Q,I=lt("auth");return T(),q("div",dt,[a("div",null,[D((T(),K(m,{onClick:u[0]||(u[0]=k=>x.value=!0)},{default:H(()=>[z("新手引导1")]),_:1})),[[I,"personal:edit"]]),C(m,{class:"btn1",ref_key:"btn1",ref:y,type:"primary",onClick:u[1]||(u[1]=k=>r.value=n.value)},{default:H(()=>[z("button 1")]),_:1},512),C(m,{class:"btn2",ref_key:"btn2",ref:n,type:"primary",onClick:u[2]||(u[2]=k=>r.value=y.value)},{default:H(()=>[z("button 2")]),_:1},512),D((T(),q("span",{onClick:h,class:"ml-40 p-2"},[z("test")])),[[I,"hello"]])]),C(O(ft),{current:r.value,options:O(e),show:x.value,"onUpdate:show":u[3]||(u[3]=k=>x.value=k)},{default:H(()=>[a("div",{ref_key:"doc",ref:_,onClick:$},"功能指引",512)]),_:1},8,["current","options","show"])])}}});const vt=R(pt,[["__scopeId","data-v-0a39d9f4"]]);export{vt as default};
//# sourceMappingURL=Test.13f1c240.1715140736669.js.map
